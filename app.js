LyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgIFZBTEhBTExBLUJSSUtFVFRFTiDigJQgTWFpbiBBcHBsaWNhdGlvbiBMb2dpYwogICBOZXcgRGVzaWduOiAiV2FybSBOb3JkaWMgU3VzdGFpbmFiaWxpdHkiCiAgID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKLy8gLS0tLSBTVkcgSWNvbiBTeXN0ZW0gLS0tLQovLyBBbGwgaWNvbnM6IHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgb3IgIjIiLCBmaWxsPSJub25lIiwgMjR4MjQgdmlld0JveAovLyBSZW5kZXJlZCBhdCB3aWR0aC9oZWlnaHQ9IjE4IiBieSBkZWZhdWx0Cgpjb25zdCBJQ09OUyA9IHsKICBmbGFtZTogYDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNOC41IDE0LjVBMi41IDIuNSAwIDAwMTEgMTJjMC0xLjM4LS41LTItMS0zLTEuMDcyLTIuMTQzLS4yMjQtNC4wNTQgMi02IC41IDIuNSAyIDQuOSA0IDYuNSAyIDEuNiAzIDMuNSAzIDUuNWE3IDcgMCAxMS0xNCAwYzAtMS4xNTMuNDMzLTIuMjk0IDEtM2EyLjUgMi41IDAgMDAyLjUgM3oiLz48L3N2Zz5gLAogIGJyaWNrOiBgPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxyZWN0IHg9IjIiIHk9IjciIHdpZHRoPSIyMCIgaGVpZ2h0PSI1IiByeD0iMSIvPjxyZWN0IHg9IjIiIHk9IjEyIiB3aWR0aD0iOSIgaGVpZ2h0PSI1IiByeD0iMSIvPjxyZWN0IHg9IjEzIiB5PSIxMiIgd2lkdGg9IjkiIGhlaWdodD0iNSIgcng9IjEiLz48bGluZSB4MT0iMTEiIHkxPSI3IiB4Mj0iMTEiIHkyPSIxMiIvPjwvc3ZnPmAsCiAgY29mZmVlOiBgPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xOCA4aDFhNCA0IDAgMDEwIDhoLTEiLz48cGF0aCBkPSJNMiA4aDE2djlhNCA0IDAgMDEtNCA0SDZhNCA0IDAgMDEtNC00Vjh6Ii8+PGxpbmUgeDE9IjYiIHkxPSIxIiB4Mj0iNiIgeTI9IjQiLz48bGluZSB4MT0iMTAiIHkxPSIxIiB4Mj0iMTAiIHkyPSI0Ii8+PGxpbmUgeDE9IjE0IiB5MT0iMSIgeDI9IjE0IiB5Mj0iNCIvPjwvc3ZnPmAsCiAgdGVudDogYDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMyAyMWw5LTE4IDkgMTgiLz48cGF0aCBkPSJNMyAyMWgxOCIvPjxwYXRoIGQ9Ik0xMCAyMWwyLTQgMiA0Ii8+PC9zdmc+YCwKICBpbmJveDogYDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cG9seWxpbmUgcG9pbnRzPSIyMiAxMiAxNiAxMiAxNCAxNSAxMCAxNSA4IDEyIDIgMTIiLz48cGF0aCBkPSJNNS40NSA1LjExTDIgMTJ2NmEyIDIgMCAwMDIgMmgxNmEyIDIgMCAwMDItMnYtNmwtMy40NS02Ljg5QTIgMiAwIDAwMTYuNzYgNEg3LjI0YTIgMiAwIDAwLTEuNzkgMS4xMXoiLz48L3N2Zz5gLAogIGZhY3Rvcnk6IGA8c3ZnIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTIgMjBoMjAiLz48cGF0aCBkPSJNOSAyMFY5bC01IDVWOWwtMiAyVjQiLz48cGF0aCBkPSJNMjIgMjBWNGwtNSA1VjQiLz48cGF0aCBkPSJNMTcgMjB2LTVIOXY1Ii8+PC9zdmc+YCwKICB0cm9waHk6IGA8c3ZnIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBvbHlsaW5lIHBvaW50cz0iOCAyMCAxMiAxNiAxNiAyMCIvPjxsaW5lIHgxPSIxMiIgeTE9IjE2IiB4Mj0iMTIiIHkyPSIxMiIvPjxwYXRoIGQ9Ik02IDRINGEyIDIgMCAwMDAgNGMwIDMuMzEgMi42OSA2IDYgNmg0YzMuMzEgMCA2LTIuNjkgNi02YTIgMiAwIDAwMC00aC0yIi8+PGxpbmUgeDE9IjYiIHkxPSI0IiB4Mj0iMTgiIHkyPSI0Ii8+PC9zdmc+YCwKICBjb21wYXNzOiBgPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIi8+PHBvbHlnb24gcG9pbnRzPSIxNi4yNCA3Ljc2IDE0LjEyIDE0LjEyIDcuNzYgMTYuMjQgOS44OCA5Ljg4IDE2LjI0IDcuNzYiLz48L3N2Zz5gLAogIGRyb3BsZXQ6IGA8c3ZnIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTEyIDIuNjlsNS42NiA1LjY2YTggOCAwIDExLTExLjMxIDB6Ii8+PC9zdmc+YCwKICBsb2c6IGA8c3ZnIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTUgOGwxLjUgOE0xOSA4bC0xLjUgOCIvPjxlbGxpcHNlIGN4PSIxMiIgY3k9IjgiIHJ4PSI3IiByeT0iMyIvPjxwYXRoIGQ9Ik01IDhjMCAxLjY2IDMuMTMgMyA3IDNzNy0xLjM0IDctMyIvPjxwYXRoIGQ9Ik02LjUgMTZjMCAxLjEgMi40NiAyIDUuNSAyczUuNS0uOSA1LjUtMiIvPjwvc3ZnPmAsCiAgbmV3c3BhcGVyOiBgPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik00IDIyaDE2YTIgMiAwIDAwMi0yVjRhMiAyIDAgMDAtMi0ySDhhMiAyIDAgMDAtMiAydjE2YTQgNCAwIDAxLTQtNFY2YTIgMiAwIDAxMi0yaDIiLz48cGF0aCBkPSJNOSA2aDdNOSAxMGg3TTkgMTRoNCIvPjwvc3ZnPmAsCiAgY2hhcnQ6IGA8c3ZnIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PGxpbmUgeDE9IjE4IiB5MT0iMjAiIHgyPSIxOCIgeTI9IjEwIi8+PGxpbmUgeDE9IjEyIiB5MT0iMjAiIHgyPSIxMiIgeTI9IjQiLz48bGluZSB4MT0iNiIgeTE9IjIwIiB4Mj0iNiIgeTI9IjE0Ii8+PGxpbmUgeDE9IjIiIHkxPSIyMCIgeDI9IjIyIiB5Mj0iMjAiLz48L3N2Zz5gLAogIGNoZWNrQ2lyY2xlOiBgPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0yMiAxMS4wOFYxMmExMCAxMCAwIDExLTUuOTMtOS4xNCIvPjxwb2x5bGluZSBwb2ludHM9IjIyIDQgMTIgMTQuMDEgOSAxMS4wMSIvPjwvc3ZnPmAsCiAgc3VuOiBgPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjUiLz48bGluZSB4MT0iMTIiIHkxPSIxIiB4Mj0iMTIiIHkyPSIzIi8+PGxpbmUgeDE9IjEyIiB5MT0iMjEiIHgyPSIxMiIgeTI9IjIzIi8+PGxpbmUgeDE9IjQuMjIiIHkxPSI0LjIyIiB4Mj0iNS42NCIgeTI9IjUuNjQiLz48bGluZSB4MT0iMTguMzYiIHkxPSIxOC4zNiIgeDI9IjE5Ljc4IiB5Mj0iMTkuNzgiLz48bGluZSB4MT0iMSIgeTE9IjEyIiB4Mj0iMyIgeTI9IjEyIi8+PGxpbmUgeDE9IjIxIiB5MT0iMTIiIHgyPSIyMyIgeTI9IjEyIi8+PGxpbmUgeDE9IjQuMjIiIHkxPSIxOS43OCIgeDI9IjUuNjQiIHkyPSIxOC4zNiIvPjxsaW5lIHgxPSIxOC4zNiIgeTE9IjUuNjQiIHgyPSIxOS43OCIgeTI9IjQuMjIiLz48L3N2Zz5gLAogIHBhY2thZ2U6IGA8c3ZnIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PGxpbmUgeDE9IjE2LjUiIHkxPSI5LjQiIHgyPSI3LjUiIHkyPSI0LjIxIi8+PHBhdGggZD0iTTIxIDE2VjhhMiAyIDAgMDAtMS0xLjczbC03LTRhMiAyIDAgMDAtMiAwbC03IDRBMiAyIDAgMDAyIDh2OGEyIDIgMCAwMDEgMS43M2w3IDRhMiAyIDAgMDAyIDBsNy00QTIgMiAwIDAwMjEgMTZ6Ii8+PHBvbHlsaW5lIHBvaW50cz0iMy4yNyA2Ljk2IDEyIDEyLjAxIDIwLjczIDYuOTYiLz48bGluZSB4MT0iMTIiIHkxPSIyMi4wOCIgeDI9IjEyIiB5Mj0iMTIiLz48L3N2Zz5gLAogIHRoZXJtb21ldGVyOiBgPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik0xNCAxNC43NlYzLjVhMi41IDIuNSAwIDAwLTUgMHYxMS4yNmE0LjUgNC41IDAgMTA1IDB6Ii8+PC9zdmc+YCwKICB0aW1lcjogYDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI5Ii8+PHBvbHlsaW5lIHBvaW50cz0iMTIgNiAxMiAxMiAxNiAxNCIvPjxsaW5lIHgxPSI5LjUiIHkxPSIzIiB4Mj0iMTQuNSIgeTI9IjMiLz48L3N2Zz5gLAogIG1lZGFsOiBgPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTUiIHI9IjYiLz48cGF0aCBkPSJNOC41NiAyLjc1YzQuMzcgNi4wMyA2LjAyIDkuNDIgOC4wMyAxNy43Mm0yLjU0LTE1LjM4Yy0zLjcyIDQuMzUtOC45NCA1LjY2LTE2Ljg4IDUuODVtMTkuNSAxLjljLTMuNS0uOTMtNi42My0uODItOC45NCAwLTIuNTguOTItNS4wMSAyLjg2LTcuNDQgNi4zMiIvPjwvc3ZnPmAsCiAgY2FsY3VsYXRvcjogYDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cmVjdCB4PSI0IiB5PSIyIiB3aWR0aD0iMTYiIGhlaWdodD0iMjAiIHJ4PSIyIi8+PGxpbmUgeDE9IjgiIHkxPSI2IiB4Mj0iMTYiIHkyPSI2Ii8+PGxpbmUgeDE9IjgiIHkxPSIxMiIgeDI9IjgiIHkyPSIxMiIgc3Ryb2tlLXdpZHRoPSIyIi8+PGxpbmUgeDE9IjEyIiB5MT0iMTIiIHgyPSIxMiIgeTI9IjEyIiBzdHJva2Utd2lkdGg9IjIiLz48bGluZSB4MT0iMTYiIHkxPSIxMiIgeDI9IjE2IiB5Mj0iMTIiIHN0cm9rZS13aWR0aD0iMiIvPjxsaW5lIHgxPSI4IiB5MT0iMTYiIHgyPSI4IiB5Mj0iMTYiIHN0cm9rZS13aWR0aD0iMiIvPjxsaW5lIHgxPSIxMiIgeTE9IjE2IiB4Mj0iMTIiIHkyPSIxNiIgc3Ryb2tlLXdpZHRoPSIyIi8+PGxpbmUgeDE9IjE2IiB5MT0iMTYiIHgyPSIxNiIgeTI9IjIwIi8+PC9zdmc+YCwKICB0YXJnZXQ6IGA8c3ZnIHdpZHRoPSIxOCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI2Ii8+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMiIvPjwvc3ZnPmAsCiAgaW5mbzogYDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIvPjxsaW5lIHgxPSIxMiIgeTE9IjE2IiB4Mj0iMTIiIHkyPSIxMiIvPjxsaW5lIHgxPSIxMiIgeTE9IjgiIHgyPSIxMi4wMSIgeTI9IjgiLz48L3N2Zz5gLAogIC8vIEJyYW5jaC1zcGVjaWZpYyBpY29ucwogIHByZXNzOiBgPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxyZWN0IHg9IjMiIHk9IjMiIHdpZHRoPSIxOCIgaGVpZ2h0PSI1IiByeD0iMSIvPjxwYXRoIGQ9Ik04IDh2OWExIDEgMCAwMDEgMWg2YTEgMSAwIDAwMS0xVjgiLz48bGluZSB4MT0iMTIiIHkxPSIxMyIgeDI9IjEyIiB5Mj0iMTciLz48bGluZSB4MT0iMTAiIHkxPSIxNSIgeDI9IjE0IiB5Mj0iMTUiLz48L3N2Zz5gLAogIGZsYXNrOiBgPHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik05IDNoNk05IDN2N0w1LjUgMTVhMyAzIDAgMDAxLjUgNS41aDEwQTMgMyAwIDAwMTguNSAxNUwxNSAxMFYzIi8+PHBhdGggZD0iTTcgMTZoMTAiLz48L3N2Zz5gLAogIG1lZ2FwaG9uZTogYDxzdmcgd2lkdGg9IjE4IiBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMyAxMWwxOS05LTkgMTktMi04LTgtMnoiLz48L3N2Zz5gLAogIC8vIElubGluZSBzbWFsbCBzaXplcyBmb3IgdGltZWxpbmUgZG90cyBhbmQgcmVzdWx0IGljb25zCiAgY2hlY2tTbWFsbDogYDxzdmcgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cG9seWxpbmUgcG9pbnRzPSIyMCA2IDkgMTcgNCAxMiIvPjwvc3ZnPmAsCiAgZG90QWN0aXZlOiBgPHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI1IiBmaWxsPSJjdXJyZW50Q29sb3IiLz48L3N2Zz5gLAogIGRvdEZ1dHVyZTogYDxzdmcgd2lkdGg9IjE0IiBoZWlnaHQ9IjE0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iNSIvPjwvc3ZnPmAsCiAgLy8gTGFyZ2UgdmFyaWFudHMgZm9yIHJlc3VsdCBkaXNwbGF5cwogIGZsYW1lTGc6IGA8c3ZnIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTguNSAxNC41QTIuNSAyLjUgMCAwMDExIDEyYzAtMS4zOC0uNS0yLTEtMy0xLjA3Mi0yLjE0My0uMjI0LTQuMDU0IDItNiAuNSAyLjUgMiA0LjkgNCA2LjUgMiAxLjYgMyAzLjUgMyA1LjVhNyA3IDAgMTEtMTQgMGMwLTEuMTUzLjQzMy0yLjI5NCAxLTNhMi41IDIuNSAwIDAwMi41IDN6Ii8+PC9zdmc+YCwKICB3aW5kTGc6IGA8c3ZnIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTkuNTkgNC41OUEyIDIgMCAxMTExIDhIMiIvPjxwYXRoIGQ9Ik0xMi41OSAxOS40MUEyIDIgMCAxMDE0IDE2SDIiLz48cGF0aCBkPSJNMTcuNzMgNy43M0EyLjUgMi41IDAgMTExOS41IDEySDIiLz48L3N2Zz5gLAogIHN0YXJMZzogYDxzdmcgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cG9seWdvbiBwb2ludHM9IjEyIDIgMTUuMDkgOC4yNiAyMiA5LjI3IDE3IDE0LjE0IDE4LjE4IDIxLjAyIDEyIDE3Ljc3IDUuODIgMjEuMDIgNyAxNC4xNCAyIDkuMjcgOC45MSA4LjI2IDEyIDIiLz48L3N2Zz5gLAogIHRodW1iTGc6IGA8c3ZnIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyLjUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTE0IDlWNWEzIDMgMCAwMC0zLTNsLTQgOXYxMWgxMS4yOGEyIDIgMCAwMDItMS43bDEuMzgtOWEyIDIgMCAwMC0yLTIuM3pNNyAyMkg0YTIgMiAwIDAxLTItMnYtN2EyIDIgMCAwMTItMmgzIi8+PC9zdmc+YCwKICBjb2ZmZWVMZzogYDxzdmcgd2lkdGg9IjQ4IiBoZWlnaHQ9IjQ4IiB2aWV3Qm94PSIwIDAgMjQgMjQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iY3VycmVudENvbG9yIiBzdHJva2Utd2lkdGg9IjIuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJNMTggOGgxYTQgNCAwIDAxMCA4aC0xIi8+PHBhdGggZD0iTTIgOGgxNnY5YTQgNCAwIDAxLTQgNEg2YTQgNCAwIDAxLTQtNFY4eiIvPjxsaW5lIHgxPSI2IiB5MT0iMSIgeDI9IjYiIHkyPSI0Ii8+PGxpbmUgeDE9IjEwIiB5MT0iMSIgeDI9IjEwIiB5Mj0iNCIvPjxsaW5lIHgxPSIxNCIgeTE9IjEiIHgyPSIxNCIgeTI9IjQiLz48L3N2Zz5gLAogIHRyb3BoeUxnOiBgPHN2ZyB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJjdXJyZW50Q29sb3IiIHN0cm9rZS13aWR0aD0iMi41IiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwb2x5bGluZSBwb2ludHM9IjggMjAgMTIgMTYgMTYgMjAiLz48bGluZSB4MT0iMTIiIHkxPSIxNiIgeDI9IjEyIiB5Mj0iMTIiLz48cGF0aCBkPSJNNiA0SDRhMiAyIDAgMDAwIDRjMCAzLjMxIDIuNjkgNiA2IDZoNGMzLjMxIDAgNi0yLjY5IDYtNmEyIDIgMCAwMDAtNGgtMiIvPjxsaW5lIHgxPSI2IiB5MT0iNCIgeDI9IjE4IiB5Mj0iNCIvPjwvc3ZnPmAsCn07CgovLyBIZWxwZXI6IGdldCBpY29uIEhUTUwgc3RyaW5nIGJ5IG5hbWUKZnVuY3Rpb24gaWNvbihuYW1lLCBleHRyYUNsYXNzID0gJycpIHsKICBjb25zdCBzID0gSUNPTlNbbmFtZV07CiAgaWYgKCFzKSByZXR1cm4gJyc7CiAgaWYgKCFleHRyYUNsYXNzKSByZXR1cm4gczsKICByZXR1cm4gcy5yZXBsYWNlKCc8c3ZnICcsIGA8c3ZnIGNsYXNzPSIke2V4dHJhQ2xhc3N9IiBgKTsKfQoKLy8gLS0tLSBIYXJkY29kZWQgQ29udGVudCAodGV4dCBvbmx5IOKAlCBudW1iZXJzIGNvbWUgZnJvbSBTdXBhYmFzZSkgLS0tLQpjb25zdCBGQUNUU19EQVRBID0gWwogIHsgaWNvbjogJ2NvZmZlZScsICAgICAgdGl0bGU6ICc2LTE1IG1pbGxpb25lciB0b24nLCAgICAgICAgZGVzY3JpcHRpb246ICdHbG9iYWx0IHByb2R1Y2VyZXMgNuKAkzE1IG1pby4gdG9uIGJydWd0ZSBrYWZmZWdydW1zIG9tIMOlcmV0LicgfSwKICB7IGljb246ICdpbmJveCcsICAgICAgIHRpdGxlOiAnNzUlIGVuZGVyIHNvbSBhZmZhbGQnLCAgICAgIGRlc2NyaXB0aW9uOiAnQ2EuIDc1JSBhZiBicnVndGUga2FmZmVncnVtcyBlbmRlciBww6UgbG9zc2VwbGFkc2VuLicgfSwKICB7IGljb246ICd0aGVybW9tZXRlcicsIHRpdGxlOiAnTWV0YW4gw5cgMjgnLCAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0thZmZlZ3J1bXMgZnJpZ2l2ZXIgbWV0YW4g4oCTIDI4IGdhbmdlIGtyYWZ0aWdlcmUgZW5kIENP4oKCLicgfSwKICB7IGljb246ICdpbmZvJywgICAgICAgIHRpdGxlOiAnMzAuMDAwKyB0b24gaSBEYW5tYXJrJywgICAgIGRlc2NyaXB0aW9uOiAnRGFubWFya3Mga2FmZmVpbXBvcnQgc2thYmVyIG92ZXIgMzAuMDAwIHRvbiBrYWZmZWdydW1zIMOlcmxpZ3QuJyB9LAogIHsgaWNvbjogJ2ZsYW1lJywgICAgICAgdGl0bGU6ICcyMC0zMCUgaMO4amVyZSBicsOmbmR2w6ZyZGknLCAgZGVzY3JpcHRpb246ICdLYWZmZWdydW1zYnJpa2V0dGVyIGJyw6ZuZGVyIGJlZHJlIGVuZCByZW5lIHNhdnNtdWxkc2JyaWtldHRlci4nIH0sCiAgeyBpY29uOiAnaW5mbycsICAgICAgICB0aXRsZTogJzEwMCUgYWZmYWxkc21hdGVyaWFsZXInLCAgICBkZXNjcmlwdGlvbjogJ0FsbGUgcsOlbWF0ZXJpYWxlciBlciBhZmZhbGQ6IGthZmZlZ3J1bXMsIHNhdnNtdWxkLCByZWdudmFuZC4nIH0sCiAgeyBpY29uOiAnaW5mbycsICAgICAgICB0aXRsZTogJ0bDuGR0IGFmIHVkdmlrbGluZ3NwbGFuZW4nLCAgZGVzY3JpcHRpb246ICdQcm9qZWt0ZXQgdWRzcHJpbmdlciBhZiBWYWxoYWxsYXMgdWR2aWtsaW5nc3BsYW4uJyB9LAogIHsgaWNvbjogJ3RlbnQnLCAgICAgICAgdGl0bGU6ICdTcGVqZGVybmVzIExlanIgMjAyNicsICAgICBkZXNjcmlwdGlvbjogJ1Byb2pla3RldCBow6ZuZ2VyIHNhbW1lbiBtZWQgU0wgMjAyNi10ZW1hZXQuJyB9Cl07Cgpjb25zdCBCUkFOQ0hFU19EQVRBID0gWwogIHsgbmFtZTogJ01pa3Jvc3BlamRlcmUnLCAgYWdlX2dyb3VwOiAnNi04IMOlcicsICAgcm9sZV90aXRsZTogJ1JlZ252YW5kc3NhbWxlcmUnLCAgICBkZXNjcmlwdGlvbjogJ0RlIHluZ3N0ZSBzcGVqZGVyZSBpbmRzYW1sZXIgcmVnbnZhbmQgdGlsIGJyaWtldHByb2R1a3Rpb25lbi4gRGUgbMOmcmVyIG9tIHZhbmRldHMga3JlZHNsw7hiIG9nIGLDpnJlZHlndGlnaGVkLicsIGljb246ICdkcm9wbGV0JywgICBsZXZlbDogJ055YmVneW5kZXInIH0sCiAgeyBuYW1lOiAnTWluaXNwZWpkZXJlJywgICBhZ2VfZ3JvdXA6ICc4LTEwIMOlcicsICByb2xlX3RpdGxlOiAnU29sb3Zucy1la3NwZXJ0ZXInLCAgIGRlc2NyaXB0aW9uOiAnTWluaXNwZWpkZXJuZSBieWdnZXIgb2cgYnJ1Z2VyIHNvbG92bmUgdGlsIGF0IHTDuHJyZSBicmlrZXR0ZXJuZS4gRGUgZWtzcGVyaW1lbnRlcmVyIG1lZCBzb2xlbmVyZ2kuJywgICAgICAgICAgIGljb246ICdzdW4nLCAgICAgICBsZXZlbDogJ055YmVneW5kZXInIH0sCiAgeyBuYW1lOiAnSnVuaW9yc3BlamRlcmUnLCAgYWdlX2dyb3VwOiAnMTAtMTIgw6VyJywgcm9sZV90aXRsZTogJ0JyaWtldHByZXNzZXJlJywgICAgICBkZXNjcmlwdGlvbjogJ0p1bmlvcmVybmUgcHJlc3NlciBvZyBmb3JtZXIgYnJpa2V0dGVybmUuIERlIGVyIHByb2R1a3Rpb25zaG9sZGV0cyBrZXJuZSBvZyB0ZXN0ZXIgZm9yc2tlbGxpZ2Ugb3Bza3JpZnRlci4nLCAgICBpY29uOiAncHJlc3MnLCAgICAgbGV2ZWw6ICdOeWJlZ3luZGVyJyB9LAogIHsgbmFtZTogJ1Ryb3Bzc3BlamRlcmUnLCAgYWdlX2dyb3VwOiAnMTItMTYgw6VyJywgcm9sZV90aXRsZTogJ0ZvcnNrZXJlICYgdGVzdGVyZScsICBkZXNjcmlwdGlvbjogJ1Ryb3BzbWVkbGVtbWVybmUgZm9yc2tlciBpIG1hdGVyaWFsZXJuZSwgbcOlbGVyIGJyw6ZuZHbDpnJkaSBvZyBkb2t1bWVudGVyZXIgZm9yc8O4Zy4gRGUgc2FtYXJiZWpkZXIgbWVkIEFhcmh1cyBVbml2ZXJzaXRldC4nLCBpY29uOiAnZmxhc2snLCBsZXZlbDogJ055YmVneW5kZXInIH0sCiAgeyBuYW1lOiAnS2xhbm1lZGxlbW1lcicsICBhZ2VfZ3JvdXA6ICcxNi0yNSDDpXInLCByb2xlX3RpdGxlOiAnS29vcmRpbmVyaW5nICYgUFInLCAgIGRlc2NyaXB0aW9uOiAnS2xhbmVuIGtvb3JkaW5lcmVyIHByb2pla3RldCwgc3R5cmVyIGhqZW1tZXNpZGVuLCBrb21tdW5pa2F0aW9uIG9nIHNhbWFyYmVqZGV0IG1lZCBwYXJ0bmVyZSBvZyBmb25kZS4nLCAgICAgICAgaWNvbjogJ21lZ2FwaG9uZScsIGxldmVsOiAnTnliZWd5bmRlcicgfQpdOwoKY29uc3QgUEFSVE5FUlNfREFUQSA9IFsKICB7IG5hbWU6ICdCSVBFRCAvIEFhcmh1cyBLb21tdW5lJywgcm9sZTogJ0VVLXByb2pla3RwYXJ0bmVyJywgICAgICAgZGVzY3JpcHRpb246ICdFVSBIb3Jpem9uIEV1cm9wZS1wcm9qZWt0OiBQb3NpdGl2ZSBFbmVyZ3kgRGlzdHJpY3RzIGkgQnJhYnJhbmQnIH0sCiAgeyBuYW1lOiAnQWFyaHVzIFVuaXZlcnNpdGV0JywgICAgIHJvbGU6ICdGb3Jza25pbmdzcGFydG5lcicsICAgICAgIGRlc2NyaXB0aW9uOiAnU3R1ZGllZ3J1cHBlIGRlciBza3JpdmVyIGFmaGFuZGxpbmcgb20gcHJvamVrdGV0JyB9LAogIHsgbmFtZTogJ0JyYWJyYW5kIEZpbmVyaW5nc2NlbnRyYWwnLCByb2xlOiAnUsOlbWF0ZXJpYWxlbGV2ZXJhbmTDuHInLCBkZXNjcmlwdGlvbjogJ0xva2FsIGxldmVyYW5kw7hyIGFmIHNhdnNtdWxkIOKAkyBhZmZhbGQgYmxpdmVyIHLDpW1hdGVyaWFsZScgfSwKICB7IG5hbWU6ICdWYWxoYWxsYSBHcnVwcGUgLyBERFMnLCAgcm9sZTogJ1Byb2pla3RncnVwcGUnLCAgICAgICAgICAgZGVzY3JpcHRpb246ICdTcGVqZGVyZ3J1cHBlbiBiYWcgcHJvamVrdGV0IOKAkyBEZSBEYW5za2UgU3BlamRlcmUgaSBCcmFicmFuZCcgfSwKICB7IG5hbWU6ICdJbnNwaXJhdGlvbnNwYXJ0bmVyZScsICAgcm9sZTogJ0luc3BpcmF0aW9uJywgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdHcm91bmRlZCBDdXBzLCDDmE5TSyBLYWZmZXN5bWJpb3NlIG0uZmwuJyB9Cl07Cgpjb25zdCBUSU1FTElORV9EQVRBID0gWwogIHsgZXZlbnRfZGF0ZTogJ0ZlYnJ1YXIgMjAyNicsICB0aXRsZTogJ0dvZGtlbmRlbHNlIHDDpSBBU0UtbcO4ZGUnLCAgICAgICAgZGVzY3JpcHRpb246ICdQcm9qZWt0ZXQgYmxldiBvZmZpY2llbHQgZ29ka2VuZHQgYWYgbGVkZWxzZW4uJywgICAgICAgICAgICAgICBjb21wbGV0ZWQ6IHRydWUgfSwKICB7IGV2ZW50X2RhdGU6ICdNYXJ0cyAyMDI2JywgICAgdGl0bGU6ICdGb25kc2Fuc8O4Z25pbmdlciAmIEJJUEVELW3DuGRlJywgIGRlc2NyaXB0aW9uOiAnQW5zw7hnbmluZ2VyIHRpbCBmb25kZSBvZyBvcHN0YXJ0c23DuGRlIG1lZCBCSVBFRCBvZyBBVS4nLCAgICAgICBjb21wbGV0ZWQ6IGZhbHNlIH0sCiAgeyBldmVudF9kYXRlOiAnQXByaWwgMjAyNicsICAgIHRpdGxlOiAnRsO4cnN0ZSBWYWxoYWxsYS1icmlrZXQhJywgICAgICAgICBkZXNjcmlwdGlvbjogJ1ZpIHByZXNzZXIsIHTDuHJyZXIgb2cgdGVzdGVyIHZvcmVzIGbDuHJzdGUgcmlndGlnZSBicmlrZXQuJywgICAgY29tcGxldGVkOiBmYWxzZSB9LAogIHsgZXZlbnRfZGF0ZTogJ01hakKAk2p1bmkgMjAyNicsIHRpdGxlOiAnRnVsZCBwcm9kdWt0aW9uJywgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQWxsZSBncmVuZSBlciBpIGdhbmcg4oCTIHZpIHByb2R1Y2VyZXIgbW9kIG3DpWxldC4nLCAgICAgICAgICAgICAgY29tcGxldGVkOiBmYWxzZSB9LAogIHsgZXZlbnRfZGF0ZTogJ0p1bmkgMjAyNicsICAgICB0aXRsZTogJ1Nhbmt0IEhhbnMgbWVkIGVnbmUgYnJpa2V0dGVyJywgICBkZXNjcmlwdGlvbjogJ1ZhbGhhbGxhIGZlanJlciBTYW5rdCBIYW5zIG1lZCBlZ25lIGJyaWtldHRlciEnLCAgICAgICAgICAgICAgIGNvbXBsZXRlZDogZmFsc2UgfSwKICB7IGV2ZW50X2RhdGU6ICdKdWxpIDIwMjYnLCAgICAgdGl0bGU6ICdTcGVqZGVybmVzIExlanIgMjAyNicsICAgICAgICAgICAgZGVzY3JpcHRpb246ICdWaSBwcsOmc2VudGVyZXIgcHJvamVrdGV0IHDDpSBTTDIwMjYuJywgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlZDogZmFsc2UgfQpdOwoKLy8gLS0tLSBTdGF0ZSAtLS0tCmNvbnN0IHN0YXRlID0gewogIG1ldHJpY3M6IG51bGwsCiAgZmFjdHM6IFtdLAogIHBhcnRuZXJzOiBbXSwKICBicmFuY2hlczogW10sCiAgdGltZWxpbmU6IFtdLAogIG5ld3M6IFtdLAogIHNldHRpbmdzOiB7fSwKICBsb2FkZWQ6IGZhbHNlCn07CgovLyAtLS0tIFN1cGFiYXNlIFJFU1QgQVBJIExheWVyIC0tLS0KY29uc3QgU0JfVVJMID0gU1VQQUJBU0VfVVJMICsgJy9yZXN0L3YxJzsKY29uc3QgU0JfSEVBREVSUyA9IHsKICAnYXBpa2V5JzogU1VQQUJBU0VfQU5PTl9LRVksCiAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBTVVBBQkFTRV9BTk9OX0tFWSwKICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICdQcmVmZXInOiAncmV0dXJuPXJlcHJlc2VudGF0aW9uJwp9OwoKYXN5bmMgZnVuY3Rpb24gc2JGZXRjaCh0YWJsZSwgb3B0cyA9IHt9KSB7CiAgY29uc3QgeyBtZXRob2QgPSAnR0VUJywgYm9keSwgcXVlcnkgPSAnJywgc2luZ2xlID0gZmFsc2UgfSA9IG9wdHM7CiAgY29uc3QgdXJsID0gYCR7U0JfVVJMfS8ke3RhYmxlfSR7cXVlcnkgPyAnPycgKyBxdWVyeSA6ICcnfWA7CiAgY29uc3QgZmV0Y2hPcHRzID0geyBtZXRob2QsIGhlYWRlcnM6IHsuLi5TQl9IRUFERVJTfSB9OwogIGlmIChzaW5nbGUgJiYgbWV0aG9kID09PSAnR0VUJykgewogICAgZmV0Y2hPcHRzLmhlYWRlcnNbJ0FjY2VwdCddID0gJ2FwcGxpY2F0aW9uL3ZuZC5wZ3JzdC5vYmplY3QranNvbic7CiAgfQogIGlmIChib2R5KSBmZXRjaE9wdHMuYm9keSA9IEpTT04uc3RyaW5naWZ5KGJvZHkpOwogIHRyeSB7CiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIGZldGNoT3B0cyk7CiAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKHJlcy5zdGF0dXNUZXh0KTsKICAgIHJldHVybiBhd2FpdCByZXMuanNvbigpOwogIH0gY2F0Y2goZSkgewogICAgY29uc29sZS53YXJuKCdTdXBhYmFzZSBlcnJvcjonLCB0YWJsZSwgZSk7CiAgICByZXR1cm4gc2luZ2xlID8gbnVsbCA6IFtdOwogIH0KfQoKLy8gU0hBLTI1NiBoZWxwZXIgZm9yIGF1dGgKYXN5bmMgZnVuY3Rpb24gc2hhMjU2KG1lc3NhZ2UpIHsKICBjb25zdCBtc2dCdWZmZXIgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUobWVzc2FnZSk7CiAgY29uc3QgaGFzaEJ1ZmZlciA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgbXNnQnVmZmVyKTsKICBjb25zdCBoYXNoQXJyYXkgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGhhc2hCdWZmZXIpKTsKICByZXR1cm4gaGFzaEFycmF5Lm1hcChiID0+IGIudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpLmpvaW4oJycpOwp9CgovLyBDb21wYXQgd3JhcHBlciBmb3IgYWRtaW4uanMgKGFuZCBnYW1lcy5qcyBnYW1lX2xvZyBjYWxscykKYXN5bmMgZnVuY3Rpb24gYXBpKGFjdGlvbiwgbWV0aG9kID0gJ0dFVCcsIGJvZHkgPSBudWxsLCBwYXJhbXMgPSAnJykgewogIC8vIE1hcCBvbGQgQ0dJIGFjdGlvbnMgdG8gU3VwYWJhc2UgdGFibGUgbmFtZXMKICBjb25zdCB0YWJsZU1hcCA9IHsKICAgICdtZXRyaWNzJzogJ21ldHJpY3MnLAogICAgJ2ZhY3RzJzogJ2ZhY3RzJywKICAgICdwYXJ0bmVycyc6ICdwYXJ0bmVycycsCiAgICAnYnJhbmNoZXMnOiAnYnJhbmNoZXMnLAogICAgJ3RpbWVsaW5lJzogJ3RpbWVsaW5lX2V2ZW50cycsCiAgICAnbmV3cyc6ICduZXdzJywKICAgICdzZXR0aW5ncyc6ICdzZXR0aW5ncycsCiAgICAnZ2FtZV9sb2cnOiAnZ2FtZV9sb2dzJwogIH07CiAgY29uc3QgdGFibGUgPSB0YWJsZU1hcFthY3Rpb25dOwogIGlmICghdGFibGUpIHJldHVybiBudWxsOwoKICBpZiAobWV0aG9kID09PSAnR0VUJykgewogICAgaWYgKGFjdGlvbiA9PT0gJ21ldHJpY3MnKSByZXR1cm4gc2JGZXRjaCh0YWJsZSwgeyBxdWVyeTogJ2lkPWVxLjEnLCBzaW5nbGU6IHRydWUgfSk7CiAgICBpZiAoYWN0aW9uID09PSAnc2V0dGluZ3MnKSB7CiAgICAgIGNvbnN0IHJvd3MgPSBhd2FpdCBzYkZldGNoKHRhYmxlLCB7IHF1ZXJ5OiAna2V5PW5lcS5hZG1pbl9wYXNzd29yZF9oYXNoJyB9KTsKICAgICAgY29uc3Qgb2JqID0ge307CiAgICAgIGlmIChyb3dzKSByb3dzLmZvckVhY2gociA9PiB7IG9ialtyLmtleV0gPSByLnZhbHVlOyB9KTsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICAgIGNvbnN0IHFNYXAgPSB7CiAgICAgICdmYWN0cyc6ICdhY3RpdmU9ZXEudHJ1ZSZvcmRlcj1wcmlvcml0eS5hc2MnLAogICAgICAncGFydG5lcnMnOiAnYWN0aXZlPWVxLnRydWUmb3JkZXI9c29ydF9vcmRlci5hc2MnLAogICAgICAnYnJhbmNoZXMnOiAnb3JkZXI9c29ydF9vcmRlci5hc2MnLAogICAgICAndGltZWxpbmUnOiAnb3JkZXI9c29ydF9vcmRlci5hc2MnLAogICAgICAnbmV3cyc6ICdhY3RpdmU9ZXEudHJ1ZSZvcmRlcj1wdWJsaXNoZWRfYXQuZGVzYyZsaW1pdD0yMCcKICAgIH07CiAgICByZXR1cm4gc2JGZXRjaCh0YWJsZSwgeyBxdWVyeTogcU1hcFthY3Rpb25dIHx8ICcnIH0pOwogIH0KCiAgaWYgKG1ldGhvZCA9PT0gJ1BPU1QnKSB7CiAgICBpZiAoYWN0aW9uID09PSAnbWV0cmljcycpIHsKICAgICAgLy8gVXBzZXJ0IG1ldHJpY3Mgcm93CiAgICAgIHJldHVybiBzYkZldGNoKHRhYmxlLCB7CiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLAogICAgICAgIGJvZHk6IGJvZHksCiAgICAgICAgcXVlcnk6ICdpZD1lcS4xJwogICAgICB9KS50aGVuKHIgPT4gQXJyYXkuaXNBcnJheShyKSA/IHJbMF0gOiByKTsKICAgIH0KICAgIGlmIChhY3Rpb24gPT09ICdzZXR0aW5ncycpIHsKICAgICAgLy8gVXBzZXJ0IGVhY2gga2V5LXZhbHVlCiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGJvZHkpKSB7CiAgICAgICAgaWYgKGsgPT09ICdhZG1pbl9wYXNzd29yZCcpIGNvbnRpbnVlOwogICAgICAgIGF3YWl0IHNiRmV0Y2godGFibGUsIHsKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgYm9keTogeyBrZXk6IGssIHZhbHVlOiB2LCB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSwKICAgICAgICAgIHF1ZXJ5OiAnb25fY29uZmxpY3Q9a2V5JwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBhcGkoJ3NldHRpbmdzJyk7IC8vIHJlLWZldGNoCiAgICB9CiAgICBpZiAoYWN0aW9uID09PSAnYXV0aCcpIHsKICAgICAgLy8gQXV0aCBjaGVjazogZmV0Y2ggdGhlIGhhc2ggYW5kIGNvbXBhcmUgY2xpZW50LXNpZGUgdXNpbmcgU0hBLTI1NgogICAgICBjb25zdCBoYXNoUm93ID0gYXdhaXQgc2JGZXRjaCh0YWJsZSwgeyBxdWVyeTogJ2tleT1lcS5hZG1pbl9wYXNzd29yZF9oYXNoJywgc2luZ2xlOiB0cnVlIH0pOwogICAgICBpZiAoIWhhc2hSb3cpIHJldHVybiB7IG9rOiBmYWxzZSwgZXJyb3I6ICdObyBwYXNzd29yZCBzZXQnIH07CiAgICAgIGNvbnN0IGlucHV0SGFzaCA9IGF3YWl0IHNoYTI1Nihib2R5LnBhc3N3b3JkIHx8ICcnKTsKICAgICAgaWYgKGlucHV0SGFzaCA9PT0gaGFzaFJvdy52YWx1ZSkgewogICAgICAgIHJldHVybiB7IG9rOiB0cnVlLCB0b2tlbjogJ2xvY2FsLWF1dGgnIH07CiAgICAgIH0KICAgICAgcmV0dXJuIHsgb2s6IGZhbHNlLCBlcnJvcjogJ0ZvcmtlcnQgYWRnYW5nc2tvZGUnIH07CiAgICB9CiAgICBpZiAoYWN0aW9uID09PSAnZ2FtZV9sb2cnKSB7CiAgICAgIHJldHVybiBzYkZldGNoKHRhYmxlLCB7IG1ldGhvZDogJ1BPU1QnLCBib2R5OiBib2R5IH0pOwogICAgfQogICAgLy8gRm9yIHRhYmxlcyB3aXRoICdpZCcgaW4gYm9keSA9IHVwZGF0ZSwgb3RoZXJ3aXNlIGluc2VydAogICAgaWYgKGJvZHkgJiYgYm9keS5pZCkgewogICAgICBjb25zdCBpZCA9IGJvZHkuaWQ7CiAgICAgIGNvbnN0IHVwZGF0ZUJvZHkgPSB7Li4uYm9keX07CiAgICAgIGRlbGV0ZSB1cGRhdGVCb2R5LmlkOwogICAgICByZXR1cm4gc2JGZXRjaCh0YWJsZSwgewogICAgICAgIG1ldGhvZDogJ1BBVENIJywKICAgICAgICBib2R5OiB1cGRhdGVCb2R5LAogICAgICAgIHF1ZXJ5OiBgaWQ9ZXEuJHtpZH1gCiAgICAgIH0pLnRoZW4ociA9PiBBcnJheS5pc0FycmF5KHIpID8gclswXSA6IHIpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHNiRmV0Y2godGFibGUsIHsgbWV0aG9kOiAnUE9TVCcsIGJvZHk6IGJvZHkgfSkKICAgICAgICAudGhlbihyID0+IEFycmF5LmlzQXJyYXkocikgPyByWzBdIDogcik7CiAgICB9CiAgfQoKICBpZiAobWV0aG9kID09PSAnREVMRVRFJykgewogICAgY29uc3QgaWRNYXRjaCA9IHBhcmFtcy5tYXRjaCgvaWQ9KFxkKykvKTsKICAgIGlmIChpZE1hdGNoKSB7CiAgICAgIGNvbnN0IGlkID0gaWRNYXRjaFsxXTsKICAgICAgLy8gU29mdCBkZWxldGUgZm9yIGZhY3RzLCBwYXJ0bmVycywgbmV3czsgaGFyZCBkZWxldGUgZm9yIHRpbWVsaW5lCiAgICAgIGlmIChbJ2ZhY3RzJywgJ3BhcnRuZXJzJywgJ25ld3MnXS5pbmNsdWRlcyhhY3Rpb24pKSB7CiAgICAgICAgcmV0dXJuIHNiRmV0Y2godGFibGUsIHsgbWV0aG9kOiAnUEFUQ0gnLCBib2R5OiB7IGFjdGl2ZTogZmFsc2UgfSwgcXVlcnk6IGBpZD1lcS4ke2lkfWAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHNiRmV0Y2godGFibGUsIHsgbWV0aG9kOiAnREVMRVRFJywgcXVlcnk6IGBpZD1lcS4ke2lkfWAgfSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB7IG9rOiB0cnVlIH07CiAgfQoKICByZXR1cm4gbnVsbDsKfQoKLy8gLS0tLSBFbWJlciBQYXJ0aWNsZSBTeXN0ZW0gKENTUy1kcml2ZW4sIGxpZ2h0d2VpZ2h0KSAtLS0tCmZ1bmN0aW9uIGluaXRFbWJlcnMoKSB7CiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VtYmVyQ29udGFpbmVyJyk7CiAgaWYgKCFjb250YWluZXIpIHJldHVybjsKCiAgY29uc3QgY29sb3JzID0gWwogICAgJyMwMDk0RjAnLCAnIzNEQjhFOCcsICcjZmY5OTQ0JywgJyNmZmNjNDQnLAogICAgJyNmZjY2MjInLCAnI0VBNjM2RicsICcjMDA5NEYwJywgJyNmZjg4MzMnCiAgXTsKCiAgLy8gMTItMTUgcGFydGljbGVzIGZvciBzdWJ0bGUgZWZmZWN0CiAgY29uc3QgY291bnQgPSB3aW5kb3cuaW5uZXJXaWR0aCA8IDc2OCA/IDEwIDogMTU7CgogIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykgewogICAgY29uc3QgZW1iZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIGVtYmVyLmNsYXNzTmFtZSA9ICdlbWJlcic7CgogICAgY29uc3Qgc2l6ZSA9IE1hdGgucmFuZG9tKCkgKiA0ICsgMjsKICAgIGNvbnN0IGxlZnQgPSBNYXRoLnJhbmRvbSgpICogNzAgKyAxNTsKICAgIGNvbnN0IGR1cmF0aW9uID0gTWF0aC5yYW5kb20oKSAqIDggKyA2OwogICAgY29uc3QgZGVsYXkgPSBNYXRoLnJhbmRvbSgpICogMTA7CiAgICBjb25zdCBkcmlmdDEgPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiA2MDsKICAgIGNvbnN0IGRyaWZ0MiA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDEwMDsKICAgIGNvbnN0IGRyaWZ0MyA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIDE0MDsKICAgIGNvbnN0IGNvbG9yID0gY29sb3JzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbG9ycy5sZW5ndGgpXTsKCiAgICBlbWJlci5zdHlsZS5jc3NUZXh0ID0gYAogICAgICB3aWR0aDogJHtzaXplfXB4OwogICAgICBoZWlnaHQ6ICR7c2l6ZX1weDsKICAgICAgbGVmdDogJHtsZWZ0fSU7CiAgICAgIGJhY2tncm91bmQ6ICR7Y29sb3J9OwogICAgICBib3gtc2hhZG93OiAwIDAgJHtzaXplICogMn1weCAke2NvbG9yfTsKICAgICAgLS1kdXJhdGlvbjogJHtkdXJhdGlvbn1zOwogICAgICAtLWRlbGF5OiAtJHtkZWxheX1zOwogICAgICAtLWRyaWZ0LTE6ICR7ZHJpZnQxfXB4OwogICAgICAtLWRyaWZ0LTI6ICR7ZHJpZnQyfXB4OwogICAgICAtLWRyaWZ0LTM6ICR7ZHJpZnQzfXB4OwogICAgYDsKCiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZW1iZXIpOwogIH0KfQoKLy8gLS0tLSBBbmltYXRlZCBDb3VudGVyIC0tLS0KZnVuY3Rpb24gYW5pbWF0ZUNvdW50ZXIoZWwsIHRhcmdldCwgZHVyYXRpb24gPSAxODAwLCBzdWZmaXggPSAnJykgewogIGlmICghZWwpIHJldHVybjsKICBjb25zdCBzdGFydCA9IDA7CiAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgY29uc3QgaXNGbG9hdCA9ICFOdW1iZXIuaXNJbnRlZ2VyKHRhcmdldCk7CgogIGZ1bmN0aW9uIHVwZGF0ZShub3cpIHsKICAgIGNvbnN0IGVsYXBzZWQgPSBub3cgLSBzdGFydFRpbWU7CiAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKGVsYXBzZWQgLyBkdXJhdGlvbiwgMSk7CiAgICAvLyBFYXNlIG91dCBjdWJpYwogICAgY29uc3QgZWFzZWQgPSAxIC0gTWF0aC5wb3coMSAtIHByb2dyZXNzLCAzKTsKICAgIGNvbnN0IGN1cnJlbnQgPSBzdGFydCArICh0YXJnZXQgLSBzdGFydCkgKiBlYXNlZDsKCiAgICBpZiAoaXNGbG9hdCkgewogICAgICBlbC50ZXh0Q29udGVudCA9IGN1cnJlbnQudG9GaXhlZCgxKSArIHN1ZmZpeDsKICAgIH0gZWxzZSB7CiAgICAgIGVsLnRleHRDb250ZW50ID0gTWF0aC5yb3VuZChjdXJyZW50KS50b0xvY2FsZVN0cmluZygnZGEtREsnKSArIHN1ZmZpeDsKICAgIH0KCiAgICBpZiAocHJvZ3Jlc3MgPCAxKSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodXBkYXRlKTsKICB9CgogIHJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpOwp9CgovLyAtLS0tIExvYWQgJiBSZW5kZXIgRmFjdHMgLS0tLQpmdW5jdGlvbiByZW5kZXJGYWN0cyhmYWN0cykgewogIGNvbnN0IGdyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmFjdHNHcmlkJyk7CiAgaWYgKCFncmlkKSByZXR1cm47CiAgZ3JpZC5pbm5lckhUTUwgPSAnJzsKCiAgZmFjdHMuZm9yRWFjaCgoZiwgaSkgPT4gewogICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgY2FyZC5jbGFzc05hbWUgPSAnZmFjdC1jYXJkIGZhZGUtaW4nOwogICAgY2FyZC5zdHlsZS50cmFuc2l0aW9uRGVsYXkgPSBgJHtpICogMC4wNn1zYDsKICAgIC8vIFVzZSBmYWN0IGljb24gaWYgaXQncyBhIGtub3duIFNWRyBrZXksIG90aGVyd2lzZSBzaG93IHRoZSBpbmZvIGljb24KICAgIGNvbnN0IGZhY3RJY29uID0gSUNPTlNbZi5pY29uXSA/IGljb24oZi5pY29uKSA6IChmLmljb24gJiYgZi5pY29uLmxlbmd0aCA8IDUgPyAnJyA6IGljb24oJ2luZm8nKSk7CiAgICBjYXJkLmlubmVySFRNTCA9IGAKICAgICAgPHNwYW4gY2xhc3M9ImZhY3QtaWNvbiI+JHtmYWN0SWNvbiB8fCBpY29uKCdpbmZvJyl9PC9zcGFuPgogICAgICA8ZGl2IGNsYXNzPSJmYWN0LXRpdGxlIj4ke2VzY0h0bWwoZi50aXRsZSl9PC9kaXY+CiAgICAgIDxwIGNsYXNzPSJmYWN0LWRlc2MiPiR7ZXNjSHRtbChmLmRlc2NyaXB0aW9uKX08L3A+CiAgICBgOwogICAgZ3JpZC5hcHBlbmRDaGlsZChjYXJkKTsKICB9KTsKfQoKLy8gLS0tLSBEYXNoYm9hcmQgLS0tLQpmdW5jdGlvbiByZW5kZXJEYXNoYm9hcmQobSkgewogIGlmICghbSkgcmV0dXJuOwoKICBjb25zdCBzZXRWYWwgPSAoaWQsIHZhbCwgaXNGbG9hdCkgPT4gewogICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CiAgICBpZiAoIWVsKSByZXR1cm47CiAgICBpZiAodmFsID09PSAwIHx8IHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHVuZGVmaW5lZCkgewogICAgICBlbC50ZXh0Q29udGVudCA9IGlkLmluY2x1ZGVzKCdib2lsJykgfHwgaWQuaW5jbHVkZXMoJ2J1cm4nKSA/ICfinJMnIDogJzAnOwogICAgfSBlbHNlIGlmIChpc0Zsb2F0KSB7CiAgICAgIGVsLnRleHRDb250ZW50ID0gcGFyc2VGbG9hdCh2YWwpLnRvRml4ZWQoMSk7CiAgICB9IGVsc2UgewogICAgICBlbC50ZXh0Q29udGVudCA9IE51bWJlcih2YWwpLnRvTG9jYWxlU3RyaW5nKCdkYS1ESycpOwogICAgfQogIH07CgogIHNldFZhbCgnZC1yYWluJywgbS5yYWlud2F0ZXJfbGl0ZXJzLCB0cnVlKTsKICBzZXRWYWwoJ2QtY29mZmVlJywgbS5jb2ZmZWVfa2csIHRydWUpOwogIHNldFZhbCgnZC1zYXdkdXN0JywgbS5zYXdkdXN0X2tnLCB0cnVlKTsKICBzZXRWYWwoJ2QtcGFwZXInLCBtLnBhcGVyX2tnLCB0cnVlKTsKICBzZXRWYWwoJ2QtZXN0aW1hdGVkJywgbS5lc3RpbWF0ZWRfYnJpcXVldHRlcyB8fCAwKTsKICBzZXRWYWwoJ2QtcHJvZHVjZWQnLCBtLmJyaXF1ZXR0ZXNfcHJvZHVjZWQpOwogIHNldFZhbCgnZC1kcnlpbmcnLCBtLmJyaXF1ZXR0ZXNfZHJ5aW5nKTsKICBzZXRWYWwoJ2QtcmVhZHknLCBtLmJyaXF1ZXR0ZXNfcmVhZHkpOwogIHNldFZhbCgnZC10ZW1wJywgbS5tYXhfdGVtcF9jZWxzaXVzLCB0cnVlKTsKICBzZXRWYWwoJ2QtYm9pbCcsIG0uZmFzdGVzdF9ib2lsX21pbnV0ZXMsIHRydWUpOwogIHNldFZhbCgnZC1idXJuJywgbS5sb25nZXN0X2J1cm5fbWludXRlcywgdHJ1ZSk7CgogIC8vIEdvYWwgJiBwcm9ncmVzcwogIGNvbnN0IGdvYWwgPSBtLmJyaXF1ZXR0ZV9nb2FsIHx8IDEwMDA7CiAgY29uc3QgcHJvZHVjZWQgPSBtLmJyaXF1ZXR0ZXNfcHJvZHVjZWQgfHwgMDsKICBjb25zdCBwY3QgPSBNYXRoLm1pbihNYXRoLnJvdW5kKChwcm9kdWNlZCAvIGdvYWwpICogMTAwKSwgMTAwKTsKCiAgY29uc3QgZ29hbEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2QtZ29hbCcpOwogIGNvbnN0IHBjdEVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2QtcGN0Jyk7CiAgY29uc3QgYmFyRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZC1iYXInKTsKCiAgaWYgKGdvYWxFbCkgZ29hbEVsLnRleHRDb250ZW50ID0gZ29hbC50b0xvY2FsZVN0cmluZygnZGEtREsnKTsKICBpZiAocGN0RWwpIHBjdEVsLnRleHRDb250ZW50ID0gcGN0ICsgJyUnOwogIGlmIChiYXJFbCkgewogICAgc2V0VGltZW91dCgoKSA9PiB7IGJhckVsLnN0eWxlLndpZHRoID0gcGN0ICsgJyUnOyB9LCAzMDApOwogIH0KCiAgLy8gVXBkYXRlIHJlZnJlc2ggdGltZQogIGNvbnN0IHJlZnJlc2hUaW1lRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVmcmVzaFRpbWUnKTsKICBpZiAocmVmcmVzaFRpbWVFbCkgewogICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsKICAgIHJlZnJlc2hUaW1lRWwudGV4dENvbnRlbnQgPSBgU2lkc3Qgb3BkYXRlcmV0OiAke25vdy50b0xvY2FsZVRpbWVTdHJpbmcoJ2RhLURLJywge2hvdXI6JzItZGlnaXQnLCBtaW51dGU6JzItZGlnaXQnfSl9YDsKICB9Cn0KCi8vIC0tLS0gSGVybyBDb3VudGVycyAtLS0tCmZ1bmN0aW9uIHVwZGF0ZUhlcm9Db3VudGVycyhtKSB7CiAgaWYgKCFtKSByZXR1cm47CiAgY29uc3QgYnJpcXVldHRlc0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NudC1icmlxdWV0dGVzJyk7CiAgY29uc3QgY29mZmVlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY250LWNvZmZlZScpOwogIGNvbnN0IHNjb3V0c0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NudC1zY291dHMnKTsKCiAgaWYgKGJyaXF1ZXR0ZXNFbCkgYW5pbWF0ZUNvdW50ZXIoYnJpcXVldHRlc0VsLCBtLmJyaXF1ZXR0ZXNfcHJvZHVjZWQgfHwgMCk7CiAgaWYgKGNvZmZlZUVsKSBhbmltYXRlQ291bnRlcihjb2ZmZWVFbCwgbS5jb2ZmZWVfa2cgfHwgMCwgMTgwMCwgJycpOwogIGlmIChzY291dHNFbCkgYW5pbWF0ZUNvdW50ZXIoc2NvdXRzRWwsIG0uc2NvdXRzX2ludm9sdmVkIHx8IDQ1KTsKfQoKLy8gLS0tLSBCcmFuY2hlcyAtLS0tCmNvbnN0IGJyYW5jaENvbG9ycyA9IFsnIzBmNDE3MicsICcjMDA5NEYwJywgJyNFQTYzNkYnLCAnIzRBOTBEOScsICcjMmM5OGI3J107CgpmdW5jdGlvbiBnZXRCcmFuY2hJY29uKGljb25LZXkpIHsKICAvLyBpY29uS2V5IGlzIGEgdGV4dCBrZXkgbGlrZSAnZHJvcGxldCcsICdzdW4nLCBldGMuCiAgaWYgKElDT05TW2ljb25LZXldKSByZXR1cm4gaWNvbihpY29uS2V5KTsKICAvLyBGYWxsYmFjazogaW5mbyBpY29uCiAgcmV0dXJuIGljb24oJ2luZm8nKTsKfQoKZnVuY3Rpb24gcmVuZGVyQnJhbmNoZXMoYnJhbmNoZXMpIHsKICBjb25zdCBncmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JyYW5jaGVzR3JpZCcpOwogIGlmICghZ3JpZCkgcmV0dXJuOwogIGdyaWQuaW5uZXJIVE1MID0gJyc7CgogIGJyYW5jaGVzLmZvckVhY2goKGIsIGkpID0+IHsKICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIGNhcmQuY2xhc3NOYW1lID0gJ2JyYW5jaC1jYXJkIGZhZGUtaW4nOwogICAgY2FyZC5zdHlsZS50cmFuc2l0aW9uRGVsYXkgPSBgJHtpICogMC4xfXNgOwogICAgY2FyZC5zdHlsZS5ib3JkZXJMZWZ0Q29sb3IgPSBicmFuY2hDb2xvcnNbaSAlIGJyYW5jaENvbG9ycy5sZW5ndGhdOwogICAgY2FyZC5pbm5lckhUTUwgPSBgCiAgICAgIDxzcGFuIGNsYXNzPSJicmFuY2gtaWNvbiI+JHtnZXRCcmFuY2hJY29uKGIuaWNvbil9PC9zcGFuPgogICAgICA8ZGl2IGNsYXNzPSJicmFuY2gtbmFtZSI+JHtlc2NIdG1sKGIubmFtZSl9PC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9ImJyYW5jaC1hZ2UiPiR7ZXNjSHRtbChiLmFnZV9ncm91cCB8fCAnJyl9PC9kaXY+CiAgICAgIDxkaXYgY2xhc3M9ImJyYW5jaC1yb2xlIj4ke2VzY0h0bWwoYi5yb2xlX3RpdGxlIHx8ICcnKX08L2Rpdj4KICAgICAgPHAgY2xhc3M9ImJyYW5jaC1kZXNjIj4ke2VzY0h0bWwoYi5kZXNjcmlwdGlvbiB8fCAnJyl9PC9wPgogICAgICA8ZGl2IGNsYXNzPSJicmFuY2gtc3RhdHMiPgogICAgICAgIDxkaXYgY2xhc3M9ImJyYW5jaC1zdGF0Ij4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJicmFuY2gtc3RhdC12YWwiPiR7Yi5zY291dHNfY291bnQgfHwgMH08L3NwYW4+CiAgICAgICAgICA8c3BhbiBjbGFzcz0iYnJhbmNoLXN0YXQtbGFiZWwiPlNwZWpkZXJlPC9zcGFuPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXYgY2xhc3M9ImJyYW5jaC1zdGF0Ij4KICAgICAgICAgIDxzcGFuIGNsYXNzPSJicmFuY2gtc3RhdC12YWwiPiR7Yi5icmlxdWV0dGVzX2NvdW50IHx8IDB9PC9zcGFuPgogICAgICAgICAgPHNwYW4gY2xhc3M9ImJyYW5jaC1zdGF0LWxhYmVsIj5Ccmlrb3R0ZXI8L3NwYW4+CiAgICAgICAgPC9kaXY+CiAgICAgIDwvZGl2PgogICAgICA8c3BhbiBjbGFzcz0iYnJhbmNoLWxldmVsIGxldmVsLSR7ZXNjSHRtbChiLmxldmVsIHx8ICdOeWJlZ3luZGVyJyl9Ij4ke2VzY0h0bWwoYi5sZXZlbCB8fCAnTnliZWd5bmRlcicpfTwvc3Bhbj4KICAgIGA7CiAgICBncmlkLmFwcGVuZENoaWxkKGNhcmQpOwogIH0pOwp9CgovLyAtLS0tIFNjb3JlYm9hcmQgLS0tLQpmdW5jdGlvbiByZW5kZXJTY29yZWJvYXJkKGJyYW5jaGVzKSB7CiAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NvcmVib2FyZCcpOwogIGlmICghZWwpIHJldHVybjsKCiAgY29uc3Qgc29ydGVkID0gWy4uLmJyYW5jaGVzXS5zb3J0KChhLCBiKSA9PiAoYi5icmlxdWV0dGVzX2NvdW50IHx8IDApIC0gKGEuYnJpcXVldHRlc19jb3VudCB8fCAwKSk7CiAgY29uc3QgbWVkYWxzID0gWycxLicsICcyLicsICczLicsICc0LicsICc1LiddOwoKICBsZXQgaHRtbCA9IGA8ZGl2IGNsYXNzPSJzY29yZWJvYXJkLXRpdGxlIj4ke2ljb24oJ21lZGFsJyl9IEdyZW4tc2NvcmVib2FyZDwvZGl2PmA7CiAgc29ydGVkLmZvckVhY2goKGIsIGkpID0+IHsKICAgIGh0bWwgKz0gYAogICAgICA8ZGl2IGNsYXNzPSJzY29yZWJvYXJkLXJvdyI+CiAgICAgICAgPHNwYW4gY2xhc3M9InNjb3JlYm9hcmQtcmFuayI+JHttZWRhbHNbaV0gfHwgKGkrMSkrJy4nfTwvc3Bhbj4KICAgICAgICA8c3BhbiBjbGFzcz0ic2NvcmVib2FyZC1pY29uIj4ke2dldEJyYW5jaEljb24oYi5pY29uKX08L3NwYW4+CiAgICAgICAgPHNwYW4gY2xhc3M9InNjb3JlYm9hcmQtbmFtZSI+JHtlc2NIdG1sKGIubmFtZSl9PC9zcGFuPgogICAgICAgIDxzcGFuIGNsYXNzPSJzY29yZWJvYXJkLXZhbCI+JHtiLmJyaXF1ZXR0ZXNfY291bnQgfHwgMH08L3NwYW4+CiAgICAgIDwvZGl2PgogICAgYDsKICB9KTsKCiAgZWwuaW5uZXJIVE1MID0gaHRtbDsKfQoKLy8gLS0tLSBQYXJ0bmVycyAtLS0tCmNvbnN0IHBhcnRuZXJDb2xvcnMgPSBbJyMwMDMzNjYnLCAnIzAwOTRGMCcsICcjMGY0MTcyJywgJyNFQTYzNkYnLCAnIzJjOThiNyddOwoKZnVuY3Rpb24gZ2V0SW5pdGlhbHMobmFtZSkgewogIHJldHVybiBuYW1lLnNwbGl0KC9bXHMvXSsvKS5zbGljZSgwLDIpLm1hcCh3ID0+IHdbMF0gfHwgJycpLmpvaW4oJycpLnRvVXBwZXJDYXNlKCk7Cn0KCmZ1bmN0aW9uIHJlbmRlclBhcnRuZXJzKHBhcnRuZXJzKSB7CiAgY29uc3QgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXJ0bmVyc0dyaWQnKTsKICBpZiAoIWdyaWQpIHJldHVybjsKICBncmlkLmlubmVySFRNTCA9ICcnOwoKICBwYXJ0bmVycy5mb3JFYWNoKChwLCBpKSA9PiB7CiAgICBjb25zdCBjb2xvciA9IHBhcnRuZXJDb2xvcnNbaSAlIHBhcnRuZXJDb2xvcnMubGVuZ3RoXTsKICAgIGNvbnN0IGluaXRpYWxzID0gZ2V0SW5pdGlhbHMocC5uYW1lKTsKICAgIGNvbnN0IGNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIGNhcmQuY2xhc3NOYW1lID0gJ3BhcnRuZXItY2FyZCBmYWRlLWluJzsKICAgIGNhcmQuc3R5bGUudHJhbnNpdGlvbkRlbGF5ID0gYCR7aSAqIDAuMDh9c2A7CiAgICBjYXJkLmlubmVySFRNTCA9IGAKICAgICAgPGRpdiBjbGFzcz0icGFydG5lci1hdmF0YXIiIHN0eWxlPSJiYWNrZ3JvdW5kOiR7Y29sb3J9Ij4ke2luaXRpYWxzfTwvZGl2PgogICAgICA8ZGl2PgogICAgICAgIDxkaXYgY2xhc3M9InBhcnRuZXItbmFtZSI+JHtlc2NIdG1sKHAubmFtZSl9PC9kaXY+CiAgICAgICAgPHNwYW4gY2xhc3M9InBhcnRuZXItcm9sZSI+JHtlc2NIdG1sKHAucm9sZSB8fCAnJyl9PC9zcGFuPgogICAgICA8L2Rpdj4KICAgICAgPHAgY2xhc3M9InBhcnRuZXItZGVzYyI+JHtlc2NIdG1sKHAuZGVzY3JpcHRpb24gfHwgJycpfTwvcD4KICAgICAgJHtwLndlYnNpdGVfdXJsID8gYDxhIGNsYXNzPSJwYXJ0bmVyLWxpbmsiIGhyZWY9IiR7ZXNjSHRtbChwLndlYnNpdGVfdXJsKX0iIHRhcmdldD0iX2JsYW5rIiByZWw9Im5vb3BlbmVyIG5vcmVmZXJyZXIiPkJlc8O4ZyBoamVtbWVzaWRlIOKGkjwvYT5gIDogJyd9CiAgICBgOwogICAgZ3JpZC5hcHBlbmRDaGlsZChjYXJkKTsKICB9KTsKfQoKLy8gLS0tLSBUaW1lbGluZSAtLS0tCmZ1bmN0aW9uIHJlbmRlclRpbWVsaW5lKGV2ZW50cykgewogIGNvbnN0IHRyYWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWVsaW5lVHJhY2snKTsKICBpZiAoIXRyYWNrKSByZXR1cm47CiAgdHJhY2suaW5uZXJIVE1MID0gJyc7CgogIGV2ZW50cy5mb3JFYWNoKChlLCBpKSA9PiB7CiAgICBjb25zdCBpc0NvbXBsZXRlZCA9ICEhZS5jb21wbGV0ZWQ7CiAgICBjb25zdCBmaXJzdE5vdERvbmUgPSBldmVudHMuZmluZEluZGV4KGV2ID0+ICFpdi5jb21wbGV0ZWQpOwogICAgY29uc3QgaXNBY3RpdmUgPSBpID09PSBmaXJzdE5vdERvbmU7CgogICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgaXRlbS5jbGFzc05hbWUgPSBgdGltZWxpbmUtaXRlbSBmYWRlLWluICR7aXNDb21wbGV0ZWQgPyAnY29tcGxldGVkJyA6ICcnfSAke2lzQWN0aXZlID8gJ2FjdGl2ZScgOiAnJ31gOwogICAgaXRlbS5zdHlsZS50cmFuc2l0aW9uRGVsYXkgPSBgJHtpICogMC4wNn1zYDsKCiAgICBsZXQgZG90Q29udGVudDsKICAgIGlmIChpc0NvbXBsZXRlZCkgewogICAgICBkb3RDb250ZW50ID0gSUNPTlMuY2hlY2tTbWFsbDsKICAgIH0gZWxzZSBpZiAoaXNBY3RpdmUpIHsKICAgICAgZG90Q29udGVudCA9IElDT05TLmRvdEFjdGl2ZTsKICAgIH0gZWxzZSB7CiAgICAgIGRvdENvbnRlbnQgPSBJQ09OUy5kb3RGdXR1cmU7CiAgICB9CgogICAgaXRlbS5pbm5lckhUTUwgPSBgCiAgICAgIDxkaXYgY2xhc3M9InRpbWVsaW5lLWRvdCI+JHtkb3RDb250ZW50fTwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJ0aW1lbGluZS1ib2R5Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJ0aW1lbGluZS1kYXRlIj4ke2VzY0h0bWwoZS5ldmVudF9kYXRlKX08L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJ0aW1lbGluZS10aXRsZSI+JHtlc2NIdG1sKGUudGl0bGUpfTwvZGl2PgogICAgICAgIDxwIGNsYXNzPSJ0aW1lbGluZS1kZXNjIj4ke2VzY0h0bWwoZS5kZXNjcmlwdGlvbiB8fCAnJyl9PC9wPgogICAgICA8L2Rpdj4KICAgIGA7CiAgICB0cmFjay5hcHBlbmRDaGlsZChpdGVtKTsKICB9KTsKfQoKLy8gLS0tLSBNaW5pIFRpbWVsaW5lIChEYXNoYm9hcmQpIC0tLS0KZnVuY3Rpb24gcmVuZGVyTWluaVRpbWVsaW5lKGV2ZW50cykgewogIGNvbnN0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpbWVsaW5lTWluaScpOwogIGlmICghZWwpIHJldHVybjsKICBlbC5pbm5lckhUTUwgPSAnJzsKCiAgY29uc3QgZmlyc3ROb3REb25lID0gZXZlbnRzLmZpbmRJbmRleChldl0gPT4gIWV2LmNvbXBsZXRlZCk7CgogIGV2ZW50cy5mb3JFYWNoKChlLCBpKSA9PiB7CiAgICBjb25zdCBpc0NvbXBsZXRlZCA9ICEhZS5jb21wbGV0ZWQ7CiAgICBjb25zdCBpc0FjdGl2ZSA9IGkgPT09IGZpcnN0Tm90RG9uZTsKICAgIGNvbnN0IGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIGl0ZW0uY2xhc3NOYW1lID0gYHRpbWVsaW5lLW1pbmktaXRlbSAke2lzQ29tcGxldGVkID8gJ2RvbmUnIDogJyd9ICR7aXNBY3RpdmUgPyAnY3VycmVudCcgOiAnJ31gOwogICAgaXRlbS5pbm5lckhUTUwgPSBgCiAgICAgIDxkaXYgY2xhc3M9InRpbWVsaW5lLW1pbmktZG90Ij48L2Rpdj4KICAgICAgPHNwYW4gY2xhc3M9InRpbWVsaW5lLW1pbmktbGFiZWwiPiR7ZXNjSHRtbChlLmV2ZW50X2RhdGUpfSDigJQgJHtlc2NIdG1sKGUudGl0bGUpfTwvc3Bhbj4KICAgIGA7CiAgICBlbC5hcHBlbmRDaGlsZChpdGVtKTsKICB9KTsKfQoKLy8gLS0tLSBOZXdzIC0tLS0KZnVuY3Rpb24gcmVuZGVyTmV3cyhuZXdzKSB7CiAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdzTGlzdCcpOwogIGlmICghbGlzdCkgcmV0dXJuOwogIGxpc3QuaW5uZXJIVE1MID0gJyc7CgogIGlmICghbmV3cyB8fCBuZXdzLmxlbmd0aCA9PT0gMCkgewogICAgbGlzdC5pbm5lckhUTUwgPSAnPHAgc3R5bGU9ImNvbG9yOnZhcigtLXRleHQtbXV0ZWQpO2ZvbnQtd2VpZ2h0OjYwMDtmb250LXNpemU6MC45cmVtOyI+SW5nZW4gbnloZWRlciBlbmRudS48L3A+JzsKICAgIHJldHVybjsKICB9CgogIG5ld3MuZm9yRWFjaCgobiwgaSkgPT4gewogICAgY29uc3QgZGF0ZSA9IG4ucHVibGlzaGVkX2F0ID8gbmV3IERhdGUobi5wdWJsaXNoZWRfYXQpIDogbmV3IERhdGUoKTsKICAgIGNvbnN0IGRhdGVTdHIgPSBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygnZGEtREsnLCB7IGRheTogJ251bWVyaWMnLCBtb250aDogJ2xvbmcnLCB5ZWFyOiAnbnVtZXJpYycgfSk7CiAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBjYXJkLmNsYXNzTmFtZSA9ICduZXdzLWNhcmQgZmFkZS1pbic7CiAgICBjYXJkLnN0eWxlLnRyYW5zaXRpb25EZWxheSA9IGAke2kgKiAwLjA4fXNgOwogICAgY2FyZC5pbm5lckhUTUwgPSBgCiAgICAgIDxkaXYgY2xhc3M9Im5ld3MtZGF0ZSI+JHtkYXRlU3RyfTwvZGl2PgogICAgICA8ZGl2IGNsYXNzPSJuZXdzLXRpdGxlIj4ke2VzY0h0bWwubi50aXRsZSl9PC9kaXY+CiAgICAgIDxwIGNsYXNzPSJuZXdzLWV4Y2VycHQiPiR7ZXNjSHRtbChuLmNvbnRlbnQgfHwgJycpfTwvcD4KICAgIGA7CiAgICBsaXN0LmFwcGVuZENoaWxkKGNhcmQpOwogIH0pOwp9CgovLyAtLS0tIFNldHRpbmdzIC0tLS0KZnVuY3Rpb24gYXBwbHlTZXR0aW5ncyhzZXR0aW5ncykgewogIGlmICghc2V0dGluZ3MpIHJldHVybjsKICBjb25zdCBtaWxlc3RvbmVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaWxlc3RvbmVUZXh0Jyk7CiAgaWYgKG1pbGVzdG9uZUVsICYmIHNldHRpbmdzLm5leHRfbWlsZXN0b25lKSB7CiAgICBtaWxlc3RvbmVFbC50ZXh0Q29udGVudCA9IHNldHRpbmdzLm5leHRfbWlsZXN0b25lLnJlcGxhY2UoL15b4oaSXHNdKy8sICcnKTsKICB9CiAgY29uc3QgbmV4dFN0ZXBFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXh0U3RlcFRleHQnKTsKICBpZiAobmV4dFN0ZXBFbCAmJiBzZXR0aW5ncy5uZXh0X21pbGVzdG9uZSkgewogICAgbmV4dFN0ZXBFbC50ZXh0Q29udGVudCA9IHNldHRpbmdzLm5leHRfbWlsZXN0b25lLnJlcGxhY2UoL15b4oaSXHNdKy8sICcnKTsKICB9Cn0KCi8vIC0tLS0gTWFpbiBMb2FkIC0tLS0KYXN5bmMgZnVuY3Rpb24gbG9hZEFsbERhdGEoKSB7CiAgdHJ5IHsKICAgIC8vIE9ubHkgZmV0Y2ggZHluYW1pYyBudW1iZXJzIGZyb20gU3VwYWJhc2UgKG1ldHJpY3MsIGJyYW5jaCBjb3VudHMsIG5ld3MsIHNldHRpbmdzKQogICAgY29uc3QgW21ldHJpY3MsIGJyYW5jaFJvd3MsIG5ld3MsIHNldHRpbmdzUm93c10gPSBhd2FpdCBQcm9taXNlLmFsbChbCiAgICAgIHNiRmV0Y2goJ21ldHJpY3MnLCB7IHF1ZXJ5OiAnaWQ9ZXEuMScsIHNpbmdsZTogdHJ1ZSB9KSwKICAgICAgc2JGZXRjaCgnYnJhbmNoZXMnLCB7IHF1ZXJ5OiAnb3JkZXI9c29ydF9vcmRlci5hc2MnIH0pLAogICAgICBzYkZldGNoKCduZXdzJywgeyBxdWVyeTogJ2FjdGl2ZT1lcS50cnVlJm9yZGVyPXB1Ymxpc2hlZF9hdC5kZXNjJmxpbWl0PTIwJyB9KSwKICAgICAgc2JGZXRjaCgnc2V0dGluZ3MnLCB7IHF1ZXJ5OiAna2V5PW5lcS5hZG1pbl9wYXNzd29yZF9oYXNoJyB9KQogICAgXSk7CgogICAgLy8gbWV0cmljczogYWRkIGVzdGltYXRlZF9icmlxdWV0dGVzIGNhbGMKICAgIGlmIChtZXRyaWNzKSB7CiAgICAgIGNvbnN0IGRyeSA9IChtZXRyaWNzLmNvZmZlZV9rZ3x8MCkgKyAobWV0cmljcy5zYXdkdXN0X2tnfHwwKSArIChtZXRyaWNzLnBhcGVyX2tnfHwwKTsKICAgICAgbWV0cmljcy5lc3RpbWF0ZWRfYnJpcXVldHRlcyA9IE1hdGguZmxvb3IoZHJ5ICogOCk7CiAgICB9CgogICAgLy8gTWVyZ2UgZHluYW1pYyBudW1iZXJzIGludG8gaGFyZGNvZGVkIGJyYW5jaCBkYXRhCiAgICBjb25zdCBicmFuY2hlcyA9IEJSQU5DSEVTX0RBVEEubWFwKChiLCBpKSA9PiB7CiAgICAgIGNvbnN0IGRiUm93ID0gYnJhbmNoUm93cyAmJiBicmFuY2hSb3dzW2ldID8gYnJhbmNoUm93c1tpXSA6IHt9OwogICAgICByZXR1cm4gewogICAgICAgIC4uLmIsCiAgICAgICAgc2NvdXRzX2NvdW50OiBkYlJvdy5zY291dHNfY291bnQgfHwgMCwKICAgICAgICBicmlxdWV0dGVzX2NvdW50OiBkYlJvdy5icmlxdWV0dGVzX2NvdW50IHx8IDAKICAgICAgfTsKICAgIH0pOwoKICAgIC8vIHNldHRpbmdzOiBjb252ZXJ0IHJvd3MgW3trZXksIHZhbHVlfSwuLi5dIHRvIG9iamVjdCB7a2V5OiB2YWx1ZX0KICAgIGNvbnN0IHNldHRpbmdzID0ge307CiAgICBpZiAoc2V0dGluZ3NSb3dzICYmIEFycmF5LmlzQXJyYXkoc2V0dGluZ3NSb3dzKSkgewogICAgICBzZXR0aW5nc1Jvd3MuZm9yRWFjaChyID0+IHsgc2V0dGluZ3Nbci5rZXldID0gci52YWx1ZTsgfSk7CiAgICB9CgogICAgc3RhdGUubWV0cmljcyA9IG1ldHJpY3M7CiAgICBzdGF0ZS5mYWN0cyA9IEZBQ1RTX0RBVEE7CiAgICBzdGF0ZS5wYXJ0bmVycyA9IFBBUlRORVJTX0RBVEE7CiAgICBzdGF0ZS5icmFuY2hlcyA9IGJyYW5jaGVzOwogICAgc3RhdGUudGltZWxpbmUgPSBUSU1FTElORV9EQVRBOwogICAgc3RhdGUubmV3cyA9IG5ld3MgfHwgW107CiAgICBzdGF0ZS5zZXR0aW5ncyA9IHNldHRpbmdzOwoKICAgIC8vIFJlbmRlciBldmVyeXRoaW5nCiAgICByZW5kZXJGYWN0cyhzdGF0ZS5mYWN0cyk7CiAgICByZW5kZXJEYXNoYm9hcmQoc3RhdGUubWV0cmljcyk7CiAgICB1cGRhdGVIZXJvQ291bnRlcnMoc3RhdGUubWV0cmljcyk7CiAgICByZW5kZXJCcmFuY2hlcyhzdGF0ZS5icmFuY2hlcyk7CiAgICByZW5kZXJTY29yZWJvYXJkKHN0YXRlLmJyYW5jaGVzKTsKICAgIHJlbmRlclBhcnRuZXJzKHN0YXRlLnBhcnRuZXJzKTsKICAgIHJlbmRlclRpbWVsaW5lKHN0YXRlLnRpbWVsaW5lKTsKICAgIHJlbmRlck1pbmlUaW1lbGluZShzdGF0ZS50aW1lbGluZSk7CiAgICByZW5kZXJOZXdzKHN0YXRlLm5ld3MpOwogICAgYXBwbHlTZXR0aW5ncyhzdGF0ZS5zZXR0aW5ncyk7CgogICAgc3RhdGUubG9hZGVkID0gdHJ1ZTsKCiAgICAvLyBFeHBvc2Ugc3RhdGUgZm9yIGFkbWluCiAgICB3aW5kb3cuX3ZhbGhhbGxhU3RhdGUgPSBzdGF0ZTsKICAgIHdpbmRvdy5fdmFsaGFsbGFSZWxvYWQgPSBsb2FkQWxsRGF0YTsKCiAgfSBjYXRjaCAoZSkgewogICAgY29uc29sZS5lcnJvcignTG9hZCBlcnJvcjonLCBlKTsKICB9Cn0KCi8vIC0tLS0gUmVmcmVzaCBidXR0b24gLS0tLQpmdW5jdGlvbiBpbml0UmVmcmVzaEJ0bigpIHsKICBjb25zdCBidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVmcmVzaEJ0bicpOwogIGlmICghYnRuKSByZXR1cm47CiAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4gewogICAgYnRuLmNsYXNzTGlzdC5hZGQoJ3NwaW5uaW5nJyk7CiAgICBjb25zdCBtZXRyaWNzID0gYXdhaXQgc2JGZXRjaCgnbWV0cmljcycsIHsgcXVlcnk6ICdpZD1lcS4xJywgc2luZ2xlOiB0cnVlIH0pOwogICAgaWYgKG1ldHJpY3MpIHsKICAgICAgY29uc3QgZHJ5ID0gKG1ldHJpY3MuY29mZmVlX2tnfHwwKSArIChtZXRyaWNzLnNhd2R1c3Rfa2d8fDApICsgKG1ldHJpY3MucGFwZXJfa2d8fDApOwogICAgICBtZXRyaWNzLmVzdGltYXRlZF9icmlxdWV0dGVzID0gTWF0aC5mbG9vcihkcnkgKiA4KTsKICAgICAgc3RhdGUubWV0cmljcyA9IG1ldHJpY3M7CiAgICAgIHJlbmRlckRhc2hib2FyZChtZXRyaWNzKTsKICAgIH0KICAgIHNldFRpbWVvdXQoKCkgPT4gYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ3NwaW5uaW5nJyksIDYwMCk7CiAgfSk7Cn0KCi8vIC0tLS0gTmF2YmFyIHNjcm9sbCBlZmZlY3QgLS0tLQpmdW5jdGlvbiBpbml0TmF2YmFyKCkgewogIGNvbnN0IG5hdmJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXZiYXInKTsKICBpZiAoIW5hdmJhcikgcmV0dXJuOwoKICBmdW5jdGlvbiB1cGRhdGVOYXZiYXIoKSB7CiAgICBpZiAod2luZG93LnNjcm9sbFkgPiA2MCkgewogICAgICBuYXZiYXIuY2xhc3NMaXN0LmFkZCgnc2Nyb2xsZWQnKTsKICAgIH0gZWxzZSB7CiAgICAgIG5hdmJhci5jbGFzc0xpc3QucmVtb3ZlKCdzY3JvbGxlZCcpOwogICAgfQogIH0KCiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHVwZGF0ZU5hdmJhciwgeyBwYXNzaXZlOiB0cnVlIH0pOwogIHVwZGF0ZU5hdmJhcigpOwoKICAvLyBIYW1idXJnZXIKICBjb25zdCBoYW1idXJnZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGFtYnVyZ2VyJyk7CiAgY29uc3QgbmF2TGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmF2TGlua3MnKTsKICBpZiAoaGFtYnVyZ2VyICYmIG5hdkxpbmtzKSB7CiAgICBoYW1idXJnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgIG5hdkxpbmtzLmNsYXNzTGlzdC50b2dnbGUoJ29wZW4nKTsKICAgIH0pOwogICAgbmF2TGlua3MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gewogICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCduYXYtbGluaycpKSB7CiAgICAgICAgbmF2TGlua3MuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpOwogICAgICB9CiAgICB9KTsKICB9CgogIC8vIEFjdGl2ZSBuYXYgbGluayBvbiBzY3JvbGwKICBjb25zdCBzZWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NlY3Rpb25baWRdJyk7CiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHsKICAgIGxldCBjdXJyZW50ID0gJyc7CiAgICBzZWN0aW9ucy5mb3JFYWNoKHMgPT4gewogICAgICBpZiAod2luZG93LnNjcm9sbFkgPj0gcy5vZmZzZXRUb3AgLSAxMjApIGN1cnJlbnQgPSBzLmlkOwogICAgfSk7CiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2LWxpbmsnKS5mb3JFYWNoKGwgPT4gewogICAgICBsLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZS1saW5rJywgbC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSA9PT0gYCMke2N1cnJlbnR9YCk7CiAgICB9KTsKICB9LCB7IHBhc3NpdmU6IHRydWUgfSk7Cn0KCi8vIC0tLS0gU21vb3RoIHNjcm9sbCBmb3IgYW5jaG9ycyAtLS0tCmZ1bmN0aW9uIGluaXRTbW9vdGhTY3JvbGwoKSB7CiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHsKICAgIGNvbnN0IGxpbmsgPSBlLnRhcmdldC5jbG9zZXN0KCdhW2hyZWZePSIjIl0nKTsKICAgIGlmICghbGluaykgcmV0dXJuOwogICAgY29uc3QgaHJlZiA9IGxpbmsuZ2V0QXR0cmlidXRlKCdocmVmJyk7CiAgICBpZiAoaHJlZiA9PT0gJyNhZG1pbicpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBvcGVuTW9kYWwoJ2FkbWluTW9kYWwnKTsKICAgICAgaWYgKHdpbmRvdy5pbml0QWRtaW4pIHdpbmRvdy5pbml0QWRtaW4oKTsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihocmVmKTsKICAgIGlmICh0YXJnZXQpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0YXJnZXQuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pOwogICAgfQogIH0pOwp9CgovLyAtLS0tIE1vZGFsIFN5c3RlbSAtLS0tCmZ1bmN0aW9uIG9wZW5Nb2RhbChpZCkgewogIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOwogIGlmICghbW9kYWwpIHJldHVybjsKICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7Cn0KCmZ1bmN0aW9uIGNsb3NlTW9kYWwoaWQpIHsKICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKICBpZiAoIW1vZGFsKSByZXR1cm47CiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7CiAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnOwp9CgpmdW5jdGlvbiBpbml0TW9kYWxzKCkgewogIC8vIENsb3NlIGJ1dHRvbnMKICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwtY2xvc2UnKS5mb3JFYWNoKGJ0biA9PiB7CiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgICAgIGNvbnN0IG1vZGFsSWQgPSBidG4uZ2V0QXR0cmlidXRlKCdkYXRhLW1vZGFsJyk7CiAgICAgIGNsb3NlTW9kYWwobW9kYWxJZCk7CiAgICB9KTsKICB9KTsKCiAgLy8gQ2xpY2sgb3ZlcmxheSB0byBjbG9zZQogIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbC1vdmVybGF5JykuZm9yRWFjaChvdmVybGF5ID0+IHsKICAgIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHsKICAgICAgaWYgKGUudGFyZ2V0ID09PSBvdmVybGF5KSBjbG9zZU1vZGFsKG92ZXJsYXkuaWQpOwogICAgfSk7CiAgfSk7CgogIC8vIEdhbWUgY2FyZCBvcGVucwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVuQnVpbGRlcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgIG9wZW5Nb2RhbCgnYnVpbGRlck1vZGFsJyk7CiAgICBpZiAod2luZG93LmluaXRCdWlsZGVyR2FtZSkgd2luZG93LmluaXRCdWlsZGVyR2FtZSgpOwogIH0pOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVuQ2FsY3VsYXRvcicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgIG9wZW5Nb2RhbCgnY2FsY01vZGFsJyk7CiAgICBpZiAod2luZG93LmluaXRDYWxjR2FtZSkgd2luZG93LmluaXRDYWxjR2FtZSgpOwogIH0pOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvcGVuUXVpeicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsKICAgIG9wZW5Nb2RhbCgncXVpek1vZGFsJyk7CiAgICBpZiAod2luZG93LmluaXRRdWl6R2FtZSkgd2luZG93LmluaXRRdWl6R2FtZSgpOwogIH0pOwoKICAvLyBBZG1pbiBuYXYgbGluayAoZm9vdGVyIGxpbmsgYW5kIGFueSBhW2hyZWY9IiNhZG1pbiJdKQogIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYtYWRtaW4sIGFbaHJlZj0iI2FkbWluIl0nKS5mb3JFYWNoKGVsID0+IHsKICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBvcGVuTW9kYWwoJ2FkbWluTW9kYWwnKTsKICAgICAgaWYgKHdpbmRvdy5pbml0QWRtaW4pIHdpbmRvdy5pbml0QWRtaW4oKTsKICAgIH0pOwogIH0pOwp9CgovLyAtLS0tIEludGVyc2VjdGlvbiBPYnNlcnZlciBmb3Igc2Nyb2xsIGFuaW1hdGlvbnMgLS0tLQpmdW5jdGlvbiBpbml0QW5pbWF0aW9ucygpIHsKICBpZiAoIXdpbmRvdy5JbnRlcnNlY3Rpb25PYnNlcnZlcikgcmV0dXJuOwoKICBjb25zdCBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZW50cmllcykgPT4gewogICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHsKICAgICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nKSB7CiAgICAgICAgZW50cnkudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTsKICAgICAgICBvYnNlcnZlci51bm9ic2VydmUoZW50cnkudGFyZ2V0KTsKICAgICAgfQogICAgfSk7CiAgfSwgeyB0aHJlc2hvbGQ6IDAuMSwgcm9vdE1hcmdpbjogJzBweCAwcHggLTQwcHggMHB4JyB9KTsKCiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZhZGUtaW4nKS5mb3JFYWNoKGVsID0+IHsKICAgIG9ic2VydmVyLm9ic2VydmUoZWwpOwogIH0pOwoKICAvLyBBbHNvIG9ic2VydmUgZGFzaC1jYXJkcyB0aGF0IGFyZW4ndCAuZmFkZS1pbgogIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXNoLWNhcmQnKS5mb3JFYWNoKGVsID0+IHsKICAgIGlmICghZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdmYWRlLWluJykpIHsKICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnZmFkZS1pbicpOwogICAgICBvYnNlcnZlci5vYnNlcnZlKGVsKTsKICAgIH0KICB9KTsKfQoKLy8gLS0tLSBVdGlsaXR5IC0tLS0KZnVuY3Rpb24gZXNjSHRtbChzdHIpIHsKICBpZiAoIXN0cikgcmV0dXJuICcnOwogIHJldHVybiBTdHJpbmcoc3RyKQogICAgLnJlcGxhY2UoLyYvZywgJyZhbXA7JykKICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JykKICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JykKICAgIC5yZXBsYWNlKC8iL2csICcmcXVvdDsnKTsKfQoKLy8gRXhwb3NlIGdsb2JhbGx5CndpbmRvdy5hcGkgPSBhcGk7CndpbmRvdy5lc2NIdG1sID0gZXNjSHRtbDsKd2luZG93Lm9wZW5Nb2RhbCA9IG9wZW5Nb2RhbDsKd2luZG93LmNsb3NlTW9kYWwgPSBjbG9zZU1vZGFsOwp3aW5kb3cuc3RhdGUgPSBzdGF0ZTsKd2luZG93LmxvYWRBbGxEYXRhID0gbG9hZEFsbERhdGE7CndpbmRvdy5yZW5kZXJCcmFuY2hlcyA9IHJlbmRlckJyYW5jaGVzOwp3aW5kb3cucmVuZGVyUGFydG5lcnMgPSByZW5kZXJQYXJ0bmVyczsKd2luZG93LnJlbmRlckZhY3RzID0gcmVuZGVyRmFjdHM7CndpbmRvdy5yZW5kZXJUaW1lbGluZSA9IHJlbmRlclRpbWVsaW5lOwp3aW5kb3cucmVuZGVyTmV3cyA9IHJlbmRlck5ld3M7CndpbmRvdy5yZW5kZXJTY29yZWJvYXJkID0gcmVuZGVyU2NvcmVib2FyZDsKd2luZG93LmFwcGx5U2V0dGluZ3MgPSBhcHBseVNldHRpbmdzOwp3aW5kb3cuSUNPTlMgPSBJQ09OUzsKd2luZG93Lmljb24gPSBpY29uOwoKLy8gLS0tLSBDUk86IENvdW50ZG93biB0byBTcGVqZGVybmVzIExlanIgMjAyNiAtLS0tCmZ1bmN0aW9uIGluaXRDb3VudGRvd24oKSB7CiAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY291bnRkb3duVmFsdWUnKTsKICBpZiAoIWVsKSByZXR1cm47CiAgLy8gU0wgMjAyNiBzdGFydHMgYXBwcm94aW1hdGVseSBKdWx5IDE4LCAyMDI2CiAgY29uc3QgdGFyZ2V0ID0gbmV3IERhdGUoJzIwMjYtMDctMThUMDA6MDA6MDAnKTsKICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOwogIGNvbnN0IGRpZmZNcyA9IHRhcmdldCAtIG5vdzsKICBpZiAoZGlmZk1zIDw9IDApIHsKICAgIGVsLnRleHRDb250ZW50ID0gJ251ISc7CiAgICByZXR1cm47CiAgfQogIGNvbnN0IGRheXMgPSBNYXRoLmNlaWwoZGlmZk1zIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTsKICBlbC50ZXh0Q29udGVudCA9IGAke2RheXN9IGRhZ2VgOwp9CgovLyAtLS0tIEluaXQgLS0tLQpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4gewogIGluaXRFbWJlcnMoKTsKICBpbml0TmF2YmFyKCk7CiAgaW5pdFNtb290aFNjcm9sbCgpOwogIGluaXRNb2RhbHMoKTsKICBpbml0Q291bnRkb3duKCk7CiAgbG9hZEFsbERhdGEoKS50aGVuKCgpID0+IHsKICAgIHNldFRpbWVvdXQoaW5pdEFuaW1hdGlvbnMsIDE1MCk7CiAgfSk7CiAgaW5pdFJlZnJlc2hCdG4oKTsKfSk7Cg==